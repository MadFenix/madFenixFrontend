(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{510:function(e,t,r){"use strict";r(11),r(12),r(20),r(21);var n=r(2),o=(r(4),r(24),r(14),r(25),r(47),r(495),r(43),r(496),r(497),r(498),r(499),r(500),r(501),r(502),r(503),r(504),r(505),r(506),r(507),r(508),r(45),r(44),r(13),r(71),r(303),r(0)),c=r(62),l=r(1);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=["sm","md","lg","xl"],v=h.reduce((function(e,t){return e[t]={type:[Boolean,String,Number],default:!1},e}),{}),m=h.reduce((function(e,t){return e["offset"+Object(l.w)(t)]={type:[String,Number],default:null},e}),{}),O=h.reduce((function(e,t){return e["order"+Object(l.w)(t)]={type:[String,Number],default:null},e}),{}),w={col:Object.keys(v),offset:Object.keys(m),order:Object.keys(O)};function j(e,t,r){var n=e;if(null!=r&&!1!==r){if(t){var o=t.replace(e,"");n+="-".concat(o)}return"col"!==e||""!==r&&!0!==r?(n+="-".concat(r)).toLowerCase():n.toLowerCase()}}var y=new Map;t.a=o.a.extend({name:"v-col",functional:!0,props:d(d(d(d({cols:{type:[Boolean,String,Number],default:!1}},v),{},{offset:{type:[String,Number],default:null}},m),{},{order:{type:[String,Number],default:null}},O),{},{alignSelf:{type:String,default:null,validator:function(e){return["auto","start","end","center","baseline","stretch"].includes(e)}},tag:{type:String,default:"div"}}),render:function(e,t){var r=t.props,data=t.data,o=t.children,l=(t.parent,"");for(var f in r)l+=String(r[f]);var d=y.get(l);if(!d){var h;for(h in d=[],w)w[h].forEach((function(e){var t=r[e],n=j(h,e,t);n&&d.push(n)}));var v=d.some((function(e){return e.startsWith("col-")}));d.push(Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({col:!v||!r.cols},"col-".concat(r.cols),r.cols),"offset-".concat(r.offset),r.offset),"order-".concat(r.order),r.order),"align-self-".concat(r.alignSelf),r.alignSelf)),y.set(l,d)}return e(r.tag,Object(c.a)(data,{class:d}),o)}})},569:function(e,t,r){"use strict";r.r(t);var n=r(558),o=r(510),c=r(559),l=(r(37),r(14),r(11),r(12),r(4),r(20),r(13),r(21),r(2)),f=(r(39),r(78));function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={middleware:"authenticated",head:{title:"Hábitos - Mad Fénix",meta:[{hid:"description",name:"description",content:"Hábitos en Mad Fénix."}]},data:function(){return{transactionData:{id:"",name:"",order:0},newHabit:{id:"",name:"",order:0},perfil:null}},computed:{serverMessage:function(){return this.$store.state.serverMessage.serverMessage},user:function(){return this.$store.state.user.user},token:function(){return this.$store.state.user.token}},mounted:function(){this.setUserCookies(),this.$axios.setToken(this.token,"Bearer"),this.getPerfil()},methods:h(h({afterPostHabit:function(e){this.getPerfil()},postHabit:function(e,t,r){var n=this;this.transactionData.id=e,this.transactionData.name=t,this.transactionData.order=r,this.$axios.post("/api/habit/post",this.transactionData).then((function(e){return n.afterPostHabit(e)})).catch((function(e){return e.response.data.message?"The given data was invalid."===e.response.data.message?n.setServerMessage("Datos inválidos."):n.setServerMessage(e.response.data.message):n.setServerMessage(e.response.data)}))},afterLogout:function(){var e=this;this.setToken(""),this.removeUser(),setTimeout((function(){return e.$router.push({path:"/login"})}),2e3)},logout:function(){var e=this;this.$axios.post("/api/logout").then((function(){return e.afterLogout()})).catch((function(){return e.afterLogout()}))},afterPerfil:function(e){this.perfil=e.data},getPerfil:function(){var e=this;this.$axios.post("/api/profile/getUserProfile").then((function(t){return e.afterPerfil(t)})).catch((function(){return e.logout()}))},setUserCookies:function(){var e=this.$cookies.get("token");if(e){this.setToken(e);var t=this.$cookies.get("user");if(t)this.updateUser(t);else{console.log("test");try{this.fetchUser()}catch(e){}}}}},Object(f.b)({setServerMessage:"serverMessage/setServerMessage",setToken:"user/setToken",updateUser:"user/updateUser",fetchUser:"user/fetchUser"})),Object(f.c)({updateUser:"user/updateUser",removeUser:"user/removeUser"}))},m=r(38),component=Object(m.a)(v,(function(){var e=this,t=e._self._c;return t(n.a,[e.perfil?t("CtCard",{staticClass:"mx-auto",attrs:{title:"Hábitos",width:"500"}},[t(c.a,{attrs:{dense:""}},[e._l(e.perfil.habits,(function(r){return t(o.a,{key:r.id,staticClass:"mt-5 tw-grid tw-grid-cols-3",attrs:{cols:"12"}},[t("CtTextField",{attrs:{"append-icon":"mdi-user",label:"Nombre"},model:{value:r.name,callback:function(t){e.$set(r,"name",t)},expression:"habit.name"}}),e._v(" "),t("CtTextField",{attrs:{"append-icon":"mdi-order-alphabetical-ascending",label:"Orden"},model:{value:r.order,callback:function(t){e.$set(r,"order",t)},expression:"habit.order"}}),e._v(" "),t("CtBtn",{on:{click:function(t){return e.postHabit(r.id,r.name,r.order)}}},[e._v("\n          Guardar\n        ")])],1)})),e._v(" "),t(o.a,{staticClass:"mt-5 tw-grid tw-grid-cols-3 tw-space-x-3",attrs:{cols:"12"}},[t("CtTextField",{attrs:{"append-icon":"mdi-user",label:"Nombre"},model:{value:e.newHabit.name,callback:function(t){e.$set(e.newHabit,"name",t)},expression:"newHabit.name"}}),e._v(" "),t("CtTextField",{attrs:{"append-icon":"mdi-order-alphabetical-ascending",label:"Orden"},model:{value:e.newHabit.order,callback:function(t){e.$set(e.newHabit,"order",t)},expression:"newHabit.order"}}),e._v(" "),t("CtBtn",{on:{click:function(t){return e.postHabit(0,e.newHabit.name,e.newHabit.order)}}},[e._v("\n          Crear\n        ")])],1),e._v(" "),e.serverMessage?t(o.a,{staticClass:"error--text",attrs:{cols:"12"},domProps:{innerHTML:e._s(e.serverMessage)}}):e._e(),e._v(" "),t(o.a,{staticClass:"my-5",attrs:{cols:"12"}},[t("CtBtn",{attrs:{to:"/",type:"accent",block:""}},[e._v("\n          Home\n        ")])],1)],2)],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports}}]);